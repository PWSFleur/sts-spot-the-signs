<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>STS — Conclusie</title>
  <style>
    :root{
      --bg:#0b1220; --card:#111b2e; --text:#eaf0ff; --muted:#b9c6e6;
      --accent:#6aa9ff; --border:rgba(255,255,255,.12);
      --good:#7dffb0; --mid:#ffe27d; --high:#ffb17d; --acute:#ff6a6a;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:linear-gradient(180deg,#070b14, var(--bg)); color:var(--text)}
    .wrap{max-width:900px;margin:0 auto;padding:20px 16px 40px}
    a{color:#cfe1ff}
    header{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin-bottom:14px}
    h1{margin:0;font-size:clamp(20px,4vw,28px)}
    .back{border:1px solid var(--border);padding:10px 12px;border-radius:12px;text-decoration:none;background:rgba(255,255,255,.04)}
    .card{
      background:rgba(17,27,46,.92);
      border:1px solid var(--border);
      border-radius:16px;
      padding:16px;
      margin:12px 0;
    }
    .pill{
      display:inline-block;
      padding:7px 10px;
      border-radius:999px;
      font-weight:900;
      margin:8px 0 6px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
    }
    .muted{color:var(--muted);line-height:1.5}
    ul{margin:8px 0 0 18px}
    .emergency{border:1px solid rgba(255,106,106,.35); background:rgba(255,106,106,.08)}
    .emergency strong{color:#ffd1d1}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Conclusie</h1>
      <a class="back" href="index.html">← Naar start</a>
    </header>

    <div class="card emergency">
      <p><strong>Als je direct hulp nodig hebt:</strong> bel <strong>112</strong> of neem contact op met
        <a href="https://veiligthuis.nl/" target="_blank" rel="noopener">Veilig Thuis</a>.
      </p>
      <p class="muted">Deze vragenlijst is geen diagnose. Het helpt alleen om signalen te herkennen.</p>
    </div>

    <div class="card" id="resultCard">
      <div class="muted" id="typeLine"></div>
      <div class="pill" id="scorePill"></div>
      <div id="levelText"></div>
      <div id="advice"></div>
    </div>
  </div>

  <script>
    const type = localStorage.getItem("sts_type") || "onbekend";
    const yes = Number(localStorage.getItem("sts_yes") || "0");
    const total = Number(localStorage.getItem("sts_total") || "0");

    const typeLine = document.getElementById("typeLine");
    typeLine.textContent =
      type === "slachtoffer"
        ? "Je hebt de vragenlijst ingevuld: signalen bij (ex-)partner."
        : type === "dader"
          ? "Je hebt de vragenlijst ingevuld: zorgen over mijn gedrag (zelfinzicht)."
          : "Vragenlijst type: onbekend.";

    const scorePill = document.getElementById("scorePill");
    scorePill.textContent = `JA-antwoorden: ${yes} van ${total}`;

    const levelText = document.getElementById("levelText");
    const advice = document.getElementById("advice");

    function setLevel(label, colorVar, textHtml, adviceItems){
      scorePill.style.boxShadow = "none";
      scorePill.style.borderColor = "rgba(255,255,255,.12)";
      scorePill.style.background = `rgba(255,255,255,.04)`;
      levelText.innerHTML = `<p style="margin:8px 0 6px;font-weight:900;color:${getComputedStyle(document.documentElement).getPropertyValue(colorVar)}"> ${label}</p>` + textHtml;
      advice.innerHTML = `<p style="margin:10px 0 6px;font-weight:800">Advies:</p><ul>${adviceItems.map(x=>`<li>${x}</li>`).join("")}</ul>`;
    }

    if (yes <= 4) {
      setLevel(
        "0–4 JA → Laag",
        "--good",
        `<p class="muted">Voorzichtigheid is nodig, maar er zijn op dit moment geen sterke patronen van dwingende controle.</p>
         <p class="muted"><strong>Let op:</strong> één enkele rode vlag kan al schadelijk zijn.</p>`,
        [
          "Let de komende periode op veranderingen of nieuwe signalen.",
          "Zoek steun bij iemand die je vertrouwt als je twijfelt."
        ]
      );
    } else if (yes <= 11) {
      setLevel(
        "5–11 JA → Verhoogd risico",
        "--mid",
        `<p class="muted">Meerdere signalen van manipulatie, psychische druk, controle of isolatie. Dit zijn ernstige patronen die vaak voorkomen vóór escalatie of geweld.</p>`,
        [
          "Praat met een professional of ervaringsdeskundige.",
          "Verken wat je nodig hebt om weer grip te krijgen.",
          "Informeer jezelf over patronen van dwingende controle."
        ]
      );
    } else if (yes <= 17) {
      setLevel(
        "12–17 JA → Hoog risico",
        "--high",
        `<p class="muted">Duidelijke patronen die sterk lijken op intieme terreur of dwingende controle. Dit risico kan in de loop van de tijd toenemen.</p>`,
        [
          "Raadpleeg een professional voor persoonlijk advies.",
          "Neem contact op met organisaties die gespecialiseerd zijn in partnergeweld.",
          "Maak (als je je onveilig voelt) een veiligheidsplan."
        ]
      );
    } else {
      setLevel(
        "18+ JA → Acuut / zeer hoog risico",
        "--acute",
        `<p class="muted">Dit is een alarmerende score. De combinatie van controle, dreiging, isolatie en manipulatie is een ernstig gevaarssignaal.</p>`,
        [
          "Zoek direct (desnoods anoniem) contact met een hulporganisatie.",
          "Deel je zorgen met iemand die je vertrouwt.",
          "Als er dreiging speelt: wacht niet."
        ]
      );
    }
  </script>
</body>
</html>
