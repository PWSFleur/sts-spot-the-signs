<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STS – Conclusie</title>
  <style>
    :root{--bg:#f6f7f9;--card:#fff;--text:#111;--muted:#555;--soft:#eef0f3;--accent:#111;--shadow:0 10px 28px rgba(0,0,0,.08);--radius:16px;}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.65}
    a{color:#0b5ed7;text-decoration:none}
    .topbar{background:#111;color:#fff;padding:10px 14px;display:flex;justify-content:space-between;align-items:center;gap:10px}
    .topbar a{color:#fff;font-weight:800;opacity:.95}
    .wrap{max-width:920px;margin:0 auto;padding:16px}
    .card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);margin:14px 0}
    h1{margin:0 0 6px;font-size:1.35rem}
    .muted{color:var(--muted)}
    .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--soft);font-weight:800;margin-left:8px}
    .result{background:#fff;border:1px solid #e6e8ec;border-radius:12px;padding:14px;margin-top:12px}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
    .btn{border:0;border-radius:12px;padding:14px 16px;font-weight:900;cursor:pointer;background:var(--accent);color:#fff;flex:1;min-width:240px}
    .btn.secondary{background:#e9ecef;color:#111}
    .notice{background:var(--soft);border-left:6px solid var(--accent);padding:12px 14px;border-radius:12px;font-size:.98rem}
    @media (max-width:560px){
      .wrap{padding:14px}
      .card{padding:16px}
      .btn{min-width:100%}
    }
  </style>
</head>
<body>

  <div class="topbar">
    <a href="index.html">← Terug naar start</a>
    <div><strong>STS</strong></div>
  </div>

  <main class="wrap">
    <section class="card">
      <h1>Conclusie</h1>
      <p class="muted" id="subtitle"></p>

      <div class="notice">
        <strong>Let op:</strong> Deze uitkomst is een indicatie op basis van zelfrapportage en is geen diagnose.
        Bij onveiligheid: bel <strong>112</strong> of neem contact op met
        <a href="https://www.veiligthuis.nl" target="_blank" rel="noopener">Veilig Thuis</a>.
      </div>

      <div class="result" id="resultBox" style="display:none;">
        <p>
          Score: <strong id="score"></strong> <span class="badge" id="band"></span>
        </p>
        <div id="advice"></div>
      </div>

      <div class="result" id="noData" style="display:none;">
        <p><strong>Geen ingevulde vragenlijst gevonden.</strong></p>
        <p class="muted">Ga terug naar de startpagina en vul een vragenlijst in om een conclusie te krijgen.</p>
      </div>

      <div class="actions">
        <button class="btn secondary" onclick="window.location.href='index.html'">Terug naar start</button>
        <button class="btn" id="retryBtn" style="display:none;">Opnieuw invullen</button>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const dataRaw = localStorage.getItem('stsResult');
      const subtitle = document.getElementById('subtitle');
      const resultBox = document.getElementById('resultBox');
      const noData = document.getElementById('noData');
      const retryBtn = document.getElementById('retryBtn');

      if(!dataRaw){
        subtitle.textContent = '';
        noData.style.display = 'block';
        return;
      }

      let data;
      try { data = JSON.parse(dataRaw); }
      catch(e){
        noData.style.display = 'block';
        return;
      }

      const score = Number(data.score);
      const total = Number(data.total);

      const isSlachtoffer = data.type === 'slachtoffer';
      subtitle.textContent = isSlachtoffer
        ? 'Op basis van de ingevulde antwoorden (zorgen over iemand anders).'
        : 'Op basis van de ingevulde antwoorden (zorgen over eigen gedrag).';

      // Band-indeling (0-4, 5-11, 12-17, 18+)
      let band = '';
      let adviceHtml = '';

      if(score <= 4){
        band = 'Laag';
        adviceHtml = `
          <p><strong>Interpretatie:</strong> Er zijn momenteel beperkte signalen zichtbaar. Toch kan één enkel signaal al betekenisvol zijn.</p>
          <p><strong>Advies:</strong></p>
          <ul>
            <li>Blijf alert op veranderingen of nieuwe signalen.</li>
            <li>Bespreek twijfels met iemand die je vertrouwt.</li>
            <li>Kom bij aanhoudende zorgen tijdig in actie.</li>
          </ul>`;
      } else if(score <= 11){
        band = 'Verhoogd risico';
        adviceHtml = `
          <p><strong>Interpretatie:</strong> Er zijn meerdere signalen van controle, manipulatie, psychische druk of isolatie.</p>
          <p><strong>Advies:</strong></p>
          <ul>
            <li>Bespreek de situatie met een professional of ervaringsdeskundige.</li>
            <li>Oriënteer je op patronen van dwingende controle.</li>
            <li>Zoek steun; je hoeft dit niet alleen te doen.</li>
          </ul>`;
      } else if(score <= 17){
        band = 'Hoog risico';
        adviceHtml = `
          <p><strong>Interpretatie:</strong> Er is sprake van duidelijke patronen die kunnen passen bij intieme terreur of dwingende controle.</p>
          <p><strong>Advies:</strong></p>
          <ul>
            <li>Neem contact op met een professional voor persoonlijk advies.</li>
            <li>Overweeg contact met gespecialiseerde organisaties rondom partnergeweld.</li>
            <li>Maak (bij onveiligheid) een veiligheidsplan.</li>
          </ul>`;
      } else {
        band = 'Acuut / zeer hoog risico';
        adviceHtml = `
          <p><strong>Interpretatie:</strong> Dit is een alarmerende score. De combinatie van controle, dreiging, isolatie en manipulatie is een ernstig waarschuwingssignaal.</p>
          <p><strong>Advies:</strong></p>
          <ul>
            <li>Zoek direct (desnoods anoniem) contact met een hulporganisatie.</li>
            <li>Deel je zorgen met iemand die je vertrouwt.</li>
            <li>Bij dreiging of direct gevaar: bel <strong>112</strong>.</li>
          </ul>`;
      }

      document.getElementById('score').textContent = `${score} / ${total} (JA-antwoorden)`;
      document.getElementById('band').textContent = band;
      document.getElementById('advice').innerHTML = adviceHtml;

      resultBox.style.display = 'block';

      retryBtn.style.display = 'inline-block';
      retryBtn.addEventListener('click', () => {
        window.location.href = isSlachtoffer ? 'slachtoffer.html' : 'dader.html';
      });
    })();
  </script>
</body>
</html>
