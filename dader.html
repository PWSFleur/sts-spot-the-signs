<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STS – Vragenlijst (Eigen gedrag)</title>
  <style>
    :root{
      --bg:#f6f7f9; --card:#fff; --text:#111; --muted:#5b5b5b;
      --shadow:0 10px 28px rgba(0,0,0,.08);
      --radius:16px;
      --btn:#111; --btnText:#fff;
      --btn2:#e9ecef; --btn2Text:#111;
      --danger:#b3261e;
      --line:#e7e7e7;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
    .topbar{
      position:sticky; top:0; z-index:10;
      background:rgba(246,247,249,.92); backdrop-filter: blur(8px);
      border-bottom:1px solid var(--line);
    }
    .topbar-inner{max-width:980px;margin:0 auto;padding:10px 14px;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .brand{font-weight:800}
    .navbtn{
      display:inline-block; padding:10px 12px; border-radius:12px;
      background:var(--btn2); color:var(--btn2Text); text-decoration:none; font-weight:700; font-size:14px;
    }
    .wrap{max-width:980px;margin:0 auto;padding:14px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;margin:12px 0}
    h1{margin:0 0 6px;font-size:22px}
    .muted{color:var(--muted);font-size:14px;margin:0}
    .notice{background:#f1f3f5;border-left:6px solid #111;padding:12px;border-radius:12px;font-size:14px;margin-top:10px}
    .q{padding:12px 0;border-bottom:1px solid var(--line)}
    .q:last-child{border-bottom:none}
    .qtitle{margin:0 0 8px;font-weight:700}
    .choices{display:flex;gap:10px;flex-wrap:wrap}
    label.choice{
      display:flex; align-items:center; gap:8px;
      background:#fff; border:1px solid var(--line);
      padding:10px 12px; border-radius:14px;
      cursor:pointer; user-select:none;
    }
    input[type="radio"]{transform:scale(1.05)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      appearance:none; border:none; cursor:pointer;
      padding:14px 16px; border-radius:14px;
      font-weight:800; text-decoration:none; text-align:center;
      background:var(--btn); color:var(--btnText);
      flex:1; min-width:220px;
    }
    .btn.secondary{background:var(--btn2); color:var(--btn2Text)}
    .small{font-size:13px;color:var(--muted)}
    .overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.45);
      display:none; align-items:center; justify-content:center; padding:18px; z-index:50;
    }
    .modal{
      width:min(520px, 100%);
      background:#fff; border-radius:18px; box-shadow:0 18px 60px rgba(0,0,0,.25);
      padding:16px;
    }
    .modal h2{margin:0 0 6px;font-size:18px}
    .modal p{margin:0 0 12px}
    .modal .row{display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap}
    .pill{
      display:inline-block; padding:6px 10px; border-radius:999px;
      background:#ffe9e7; color:var(--danger); font-weight:800; font-size:12px;
      margin-left:8px;
    }
    @media (max-width:520px){
      .wrap{padding:12px}
      .card{padding:14px}
      label.choice{flex:1; justify-content:center}
      .btn{min-width:100%}
    }
  </style>
</head>
<body>

<div class="topbar">
  <div class="topbar-inner">
    <div class="brand">STS – Spot the Signs</div>
    <a class="navbtn" href="index.html">Terug naar start</a>
  </div>
</div>

<main class="wrap">

  <section class="card">
    <h1>Vragenlijst – Zelfreflectie (eigen gedrag)</h1>
    <p class="muted">
      Beantwoord alle vragen met <strong>JA</strong> of <strong>NEE</strong>. De vragenlijst is bedoeld voor zelfinzicht:
      signalen herkennen, niet veroordelen.
    </p>
    <div class="notice">
      <strong>Belangrijk:</strong> deze vragenlijst is <strong>geen diagnose</strong>. Bij zorgen of escalatie is het verstandig om professionele hulp te zoeken.
      Bij direct gevaar: bel <strong>112</strong> of neem contact op met
      <a href="https://www.veiligthuis.nl" target="_blank" rel="noopener">Veilig Thuis</a>.
    </div>
  </section>

  <section class="card">
    <form id="quiz" novalidate>

      <div class="q">
        <p class="qtitle">1 — Controle & grenzen van je partner</p>
        <p class="qtitle">1. Probeer je te bepalen waar je partner is, wat ze doet of met wie ze contact heeft?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q1" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q1" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">2. Verwacht je dat zij altijd opneemt, terugbelt of antwoordt wanneer jij dat wilt?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q2" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q2" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">3. Word je boos of onrustig als je niet weet waar ze is of met wie ze is?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q3" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q3" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">4. Vraag je haar vaak om haar locatie te delen?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q4" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q4" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">2 — Jaloezie & bezit</p>
        <p class="qtitle">5. Voel je jaloezie als ze tijd doorbrengt met vrienden, familie of collega’s?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q5" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q5" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">6. Denk je snel dat ze niet loyaal is, zelfs als daar geen bewijs voor is?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q6" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q6" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">7. Heb je moeite als ze aandacht aan andere mensen geeft?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q7" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q7" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">3 — Manipulatie & emotionele druk</p>
        <p class="qtitle">8. Geef je haar het gevoel dat iets haar schuld is, ook als jij boos werd?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q8" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q8" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">9. Leg je problemen in de relatie vaak bij haar neer?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q9" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q9" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">10. Heb je haar wel eens verward of laten twijfelen aan zichzelf (gaslighting)?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q10" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q10" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">11. Maak je gebruik van schuldgevoelens om je zin te krijgen?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q11" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q11" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">4 — Intimidatie & boosheid</p>
        <p class="qtitle">12. Word je snel boos, agressief of intimiderend in discussies?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q12" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q12" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">13. Heb je ooit geschreeuwd, vernederd of bedreigd in een ruzie?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q13" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q13" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">14. Heb je dingen kapotgemaakt of gegooid om een punt te maken?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q14" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q14" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">15. Ben je bang dat je boosheid kan escaleren?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q15" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q15" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">5 — Isolatie</p>
        <p class="qtitle">16. Heb je haar afgeraden om met bepaalde mensen om te gaan?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q16" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q16" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">17. Vind je dat familie of vrienden haar negatief beïnvloeden?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q17" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q17" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">18. Heb je geprobeerd haar contact met anderen te beperken?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q18" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q18" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">6 — Lovebombing & snelle binding</p>
        <p class="qtitle">19. Heb je in het begin van de relatie snel grote stappen gezet (samenwonen, trouwen, kinderen)?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q19" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q19" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">20. Had je hierbij de behoefte haar stevig aan je te binden?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q20" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q20" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">21. Gebruik je gedeelde verplichtingen soms om haar bij je te houden?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q21" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q21" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">7 — Dreiging & chantage</p>
        <p class="qtitle">22. Heb je ooit gedreigd jezelf, haar of iemand anders iets aan te doen?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q22" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q22" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">23. Heb je woorden gebruikt als: “Als jij weggaat, dan…”?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q23" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q23" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">24. Heb je haar ooit bang gemaakt zodat ze zou doen wat jij wilde?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q24" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q24" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">8 — Privacy & controle</p>
        <p class="qtitle">25. Controleer je haar telefoon, berichten of accounts?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q25" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q25" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">26. Heb je ooit een wachtwoord gevraagd of afgedwongen?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q26" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q26" value="nee"> NEE</label>
        </div>
      </div>

      <div class="q">
        <p class="qtitle">27. Vind je dat je het recht hebt om alles van haar te weten?</p>
        <div class="choices">
          <label class="choice"><input type="radio" name="q27" value="ja"> JA</label>
          <label class="choice"><input type="radio" name="q27" value="nee"> NEE</label>
        </div>
      </div>

      <div class="actions">
        <button type="button" class="btn" id="submitBtn">Bekijk conclusie</button>
        <a class="btn secondary" href="index.html">Terug naar start</a>
      </div>

      <p class="small">Beantwoord elke vraag. De conclusie wordt gebaseerd op het aantal “JA”-antwoorden.</p>
    </form>
  </section>

</main>

<div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="mTitle">
  <div class="modal">
    <h2 id="mTitle">Niet alle vragen zijn ingevuld <span class="pill" id="missingPill">—</span></h2>
    <p id="mText">Vul alle vragen in om een betrouwbare conclusie te ontvangen.</p>
    <div class="row">
      <button type="button" class="btn secondary" id="closeModalBtn">Sluiten</button>
      <button type="button" class="btn" id="goFirstMissingBtn">Ga naar eerste open vraag</button>
    </div>
  </div>
</div>

<script>
  const TOTAL = 27;

  function getFirstMissing() {
    for (let i = 1; i <= TOTAL; i++) {
      const checked = document.querySelector('input[name="q'+i+'"]:checked');
      if (!checked) return i;
    }
    return null;
  }

  function getScore() {
    let score = 0;
    for (let i = 1; i <= TOTAL; i++) {
      const checked = document.querySelector('input[name="q'+i+'"]:checked');
      if (checked && checked.value === "ja") score++;
    }
    return score;
  }

  const overlay = document.getElementById("overlay");
  const missingPill = document.getElementById("missingPill");
  const mText = document.getElementById("mText");

  function openModal(missingCount, firstMissing) {
    missingPill.textContent = missingCount + " open";
    mText.textContent = "Er ontbreken nog " + missingCount + " antwoord(en). Vul alles in om door te gaan.";
    overlay.style.display = "flex";
    overlay.dataset.firstMissing = String(firstMissing);
  }
  function closeModal(){ overlay.style.display="none"; }

  document.getElementById("closeModalBtn").addEventListener("click", closeModal);
  document.getElementById("goFirstMissingBtn").addEventListener("click", () => {
    const first = parseInt(overlay.dataset.firstMissing || "1", 10);
    const el = document.querySelector('input[name="q'+first+'"]');
    if (el) el.scrollIntoView({behavior:"smooth", block:"center"});
    closeModal();
  });
  overlay.addEventListener("click", (e)=>{ if(e.target===overlay) closeModal(); });

  document.getElementById("submitBtn").addEventListener("click", () => {
    const firstMissing = getFirstMissing();
    if (firstMissing !== null) {
      const missingCount = Array.from({length: TOTAL}, (_, idx) => idx+1)
        .filter(i => !document.querySelector('input[name="q'+i+'"]:checked')).length;
      openModal(missingCount, firstMissing);
      return;
    }

    const score = getScore();

    localStorage.setItem("stsResult", JSON.stringify({
      type: "dader",
      score,
      total: TOTAL,
      ts: Date.now()
    }));

    window.location.href = "conclusie.html";
  });
</script>

</body>
</html>
